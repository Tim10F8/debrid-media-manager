Poster component trace (src/components/poster.tsx)

- Inputs and state
  - Expects props with `imdbId` and `title` (typed as `Record<string, string>`).
  - State: `posterUrl` (string, initial empty) and `fallbackAttempted` (boolean, initial false).

- How the poster URL is derived
  - `getPosterUrl` exits early with an empty string when `imdbId` is null/undefined/empty.
  - It strips non-numeric characters from the IMDB id (e.g., tt123 -> 123), hashes the digits with a simple 32-bit hash, makes the hash positive, and maps it to 0-9.
  - The computed number picks a deterministic CDN host: `https://posters{subdomain}.debridmediamanager.com/${imdbId}-small.jpg`.

- Lifecycle and control flow
  1) Initial render: `posterUrl` is `''`, so the component shows a loading placeholder.
  2) `useEffect` runs on mount and whenever `imdbId` changes. If `imdbId` exists, it sets `posterUrl` via `getPosterUrl` and resets `fallbackAttempted` to false, triggering a re-render.
  3) With a non-empty `posterUrl`, `<Image>` starts loading from the computed CDN URL.
  4) Success path: if the image loads, nothing else happens; the poster displays.
  5) Failure path (`onError` -> `handleImageError`):
     - Runs only once because it checks `!fallbackAttempted` before proceeding and then sets `fallbackAttempted` to true.
     - If `imdbId` exists, it first calls `/api/poster?imdbid=${imdbId}`. On a 2xx response it expects JSON `{ url }` and swaps `posterUrl` to that value, causing a retry render.
     - If the API call fails or is absent, it falls back to a generated image from `fakeimg.pl`, using `title` -> `imdbId` -> `'No Poster'` as the display text. The text is URL-encoded before being injected into the fakeimg URL.

- Rendering details
  - Wrapper div enforces a 2:3 aspect ratio, rounded corners, hidden overflow, and a gray background.
  - When `posterUrl` is set, it renders a Next.js `<Image>` with `fill` layout, responsive `sizes`, `object-cover`, lazy loading, and alt text derived from `title`/`imdbId`.
  - When `posterUrl` is empty, it renders a centered “Loading...” placeholder until `useEffect` sets a URL.
